[[snippets-section]]
=== Section snippet

The section snippet combines most common snippets into one convenient file.
It helps you being even more lazy, because a single line of AsciiDoc is sufficient to document one endpoint.
Assuming of course that you already documented your code with Javadoc.

.Asciidoc
[source,asciidoc,indent=0,role="secondary"]
----
\include::{snippets}/your-endpoint/section.adoc[]
----

.Template itself
[source,asciidoc,indent=0,role="secondary"]
----
include::../../../spring-auto-restdocs-core/src/main/resources/org/springframework/restdocs/templates/asciidoctor/section.snippet[]
----

.Template placeholders
|===
|Placeholder|Example|Description

| {link}
| items-id
| Derived from the documentation string. For example: `items/id`.

| {title}
| Get Item By Id
| Derived from method name. For example: `getItemById`.

| {snippets}
| target/generated-snippets
| Base snippet folder configured via `org.springframework.restdocs.outputDir` system property.

| {sections}
| <iterable>
| Contains all sections (Snippet classes) which were configured to be included in the section snippet. Moustache templater iterates over this and expands into separate header and link lines.

| {header}
| Authorization
| Snippet header hard-coded inside Snippet class.

| {fileName}
| authorization
| Snippet name hard-coded inside Snippet class.

|===

[[snippets-section-configuration]]
==== Snippet configuration

By default, these snippets in the following order are linked inside section snippet:

|===
| Snippet name|Example|Description
| method-path
| `POST /items/{id}`
| (Non-configurable) `MethodAndPathSnippet` is used to determine the HTTP method and path.

| description
| Get an item by its ID.
| (Non-configurable) `DescriptionSnippet` reads the Javadoc on the method.

| authorization
| Resource is public.
| `AuthorizationSnippet` can be used for custom authorization information, e.g. the OAuth role required for the endpoint

| path-parameters
| <table>
| `PathParametersSnippet` automatically lists parameters in the path including their type, whether they are optional, and their Javadoc.

| request-parameters
| <table>
| `RequestParametersSnippet` automatically lists query parameters including their type, whether they are optional, and their Javadoc.

| request-fields
| <table>
| `JacksonRequestFieldSnippet` automatically lists all fields of the request body including their type, whether they are optional, and their Javadoc.

| response-fields
| <table>
| `JacksonResponseFieldSnippet` automatically lists all fields of the response body including their type, whether they are optional, and their Javadoc.

| curl-request
| `$ curl 'http://localhost/items/1'`
| The original `CurlRequestSnippet` from Spring REST Docs is used here to provide a cURL example of the request.

| http-response
| `HTTP/1.1 200 OK +
   { id: "myId", ... }`
| The original `HttpResponseSnippet` from Spring REST Docs is used here to provide the HTTP response from the test.

|===

If you want to configure custom sections and thier order, instead of using `AutoDocumentation.section()` you can use
 `AutoDocumentation.sectionBuilder()` in the following manner:

.Configuring section snippet
[source,java,indent=0,role="secondary"]
----
AutoDocumentation.sectionBuilder()
    .snippetNames(
        SnippetRegistry.PATH_PARAMETERS,
        SnippetRegistry.REQUEST_PARAMETERS,
        SnippetRegistry.REQUEST_FIELDS,
        SnippetRegistry.RESPONSE_FIELDS)
    .skipEmpty(true) <2>
    .build()
----
<1> only selected snippets will be used in the specified order
<2> if snippets having no content should be skipped from section
