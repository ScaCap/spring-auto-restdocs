language: java
sudo: false
dist: trusty
jdk:
- oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - $HOME/.m2
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
before_install:
- mvn install:install-file -Dfile=lib/spring-restdocs-core-2.0.2.RELEASE-test.jar
  -DgroupId=org.springframework.restdocs -DartifactId=spring-restdocs-core -Dversion=2.0.2.RELEASE
  -Dpackaging=jar -Dclassifier=test
script:
- mvn install -B -V
- cd samples
- mvn install -B -V
- cd java-webmvc
- ./gradlew check
- cd ..
- cd kotlin-webmvc
- ./gradlew check
- cd ../..
after_success:
- test "$TRAVIS_BRANCH" = "master"
  && test "$TRAVIS_PULL_REQUEST" = "false"
  && test "$TRAVIS_JDK_VERSION" = "oraclejdk8"
  && "$DEPLOY_DIR/decrypt.sh"
  && mvn deploy --settings "$DEPLOY_DIR/travis-settings.xml" -DskipTests=true -B -V
branches:
  only:
  - master
env:
  global:
  - DEPLOY_DIR="$TRAVIS_BUILD_DIR/deploy"
  - secure: WZ5SMVIkJbiZuHeoGExon25SvRwkbpx3UhNLEPqWENm01vGCAwnhJe1KLtOMrQ/rU0GUig/pSxdFU+HiRwVmVQgCCJb+eSey5gS+e5k0VKDiKKUXMFFP33dpsVz1YHoLKDNQmCk1hgrGhjNEjDERucdFvqpwqJzBKLajIk+6CnNTaiFEqMeivYDN4nVN0enLtBg32HjMvIdZ1wCz6u9VJStXWGe0KSVWbEOYcJ8UAHXYBm1irJvHUqw5bEcHSD+B89ePIqew9qX9/RCQWH2wOo/HedCLdBPDhj1tvpCXUZmB38ux6cQNzurtSsZx36G+0z94iagpBsswt1c/8IAAq9RKrRe6Qxa+KURvV6b5CQLb8P+odUhLz8L5OhIdXYiU0GR9QuqAIOQfZRbAmg/QqaSKIr1+992k70o6eiSq0FgKcMU1VMy+jua5ZMJx92LryLkXDtXBxVvQBfccEnqSBfZaDTNHsyOmbK7ezRtDD3AsYiqtsvhI+b3dH2DyMumMNuywd8+nfcC/dLpsaYoKxO+QRUsYWQ/rJPI0y/mk47dBhHZ6cs0hO36VeqODC7azp3OXwLzejyS+xMU2Xjy2xkWCfcVKhmZ7ua8QH5b5TRdbCIDTEiOsXoRJVLJjOZnwEQXZMzJJ8hCORxzFfWgi/Jjl1p5vJHrohpCcLqRCMX4=
  - secure: pupPESgh6+tnuj4zhFSnm2NWLusvOabAkSMsIfoosRF0byGqzclFi3CHvWaYIdrfiUXCpUWGtuoyh0IVfCK3Pz7zOwLtxAyI7z29cXHj5PDXdqwuA6bsFiz/EZE4sibXYoUcUXhpgjsT3VgRmoIO2rO6WRr651IhcOEcXLJUQbVSEjzhfhyVdHkJAjgmtZ3wXPvvemZQcUZ8TYVk6MEKRpx+lmaNS+IbzVWgNNccuv4JsrmuzSG/Y+wQiFhCi62MIyrFhX9F7t013OrtlTF6IHFxJXqN7/pZxyep0UhDB7R6q/6vurJ13NPyRcGDM/4vDph4n21+FsjK2yslIHjQXTCp90Gh/VCQQPf8EOS8lRpt3PQCYZfi7KxmPM2LuYh9KG1479s1BmUJgz9pLTTz/s4NvRsiYBm8XWdxiOalucRSAxPtJPk1wsCxqQvE0TiyHEcAz1LPeArRPxHPlPzIaZgV31oPawLQ/qlfGlATvF4fKja/XPKix2E9JLscmCVBrMqoMKhO+MNVS4PepKh2XSELsq8ddVx+FtlTxO5Nf5712Iasf5MYcXge8avT0IWmyogyWWECEZg3sWp5IpBOvF3s10pWA/U1/X2S6qgKkC6VSv+Dcp8efQRPlUICIvqkskBmyjJ3PbcB8WCKl7b/HLjqqyPWgs5mLfbEcrH4JCA=
  - secure: KxmwzdeJRZtQ7av7WoL+Dp8xBle3QW+xfuT3kaACSWs27byXdUlzDNE8nX+ZP00b+RcIl016pJ7TIRyZggH2fBOY+2gnhHj0Y7pKzBX2sgTJKxUHARpTRh7Pq5+v57MSe9MP9AKl48xlpqXH12IT/YtUsWFNoMrbzGB0xSq8WunQCCPNCxkcZ4fRlmdrEuAcwu6pnQGQsYUZ0p2nIy4P/KIRFwHizhiQcViS9F8wIf0+QuOoG9CRr2vrYjE9mQueyk3gd4UMsw7XFNSKdKc60cOe4/paxMCmS21H+YXSVAEYAFrsi3/50S7kIOu/n/7gRKqNJdt2HKrckEW1bc26u/dDlzyqx5tULU4OhgDf5nghF/9ZfPrVIxrukBcHSc04paDX4DNWNbjcAG1yBslNtTu5mAfQH1j2ckh3uMYSxOh2js2qdrjEjPz6lPFPWjpLTf9+rksZZjuEAWcZGU0iisqMTFYDbcl7DZ2m8wakfdBS3tAcDvU3Dd6O6HQHYjF1apCfZLCsygmfim0D+Tfz8J8gSbM9y7iZJxinKdsM7p8HtgusUhecPFmVIPegLLsISW2w16Gr5ODgPfIGRGCrT+YdiBA/8On/B6fzCpSIwOykqRoOHesOclpUuAfv8SLrwikum1oTnDrd5qDXYZ7GnVnlWwN3IW7/bLRWzLl9sfI=
  - secure: VFtqkAEMyTcUTmTv8GQGo+/aZfqTzd67ncUl1eYxdOPj1ipzhSY6/gaNMyHS0TwD5UkoKp0CAWjAvXEmAgAUHIGN6k5MIgfapLK4pN16Z51MsZPcSoigVpQg/WjlzXsCWSvPweybmaSfmgqNcx+BUZb25tIN+uSBxt2pvbsCCBD+PZhvhxH+cXuRZGmuDFtU5qN0yxagJAW0jBbrzwsUMbYZw8gBTNtuftHlsZ6ZuakpT911zTt2NfWMjwiSGSTB9i0ZPMeiYzCHCy5ABBpJK5YnoShNhB45wUbz1BwrVR5aWf1A8EBf2P/78jhJYXLV/7GcQBftkT/iUU/nTNZ0ihnF2bEfVzj7hsflulqHV9R+9sCNPXnsb//MAweGz/PZkfENgob+DkiYj4Tt6sC0I+szYJFYVpZImqSce1D36oAgpAyee/W48xCxoc/ZULmzvQoBFrre7mtm0YLsJFkOFS/8XyKkwgyNONWVTeeGb/C6TbyWWJvF6be3tzUkE+OupXmfl4pSdDE6EiQXQAKtnYLS5corz2M55yIwVhp8ZKUPkKgjFVlY2nLz3P84CxKx7zdSnpBM7iyCLGgq3gKHt1uk9t0goX4pikLDDoJ3dGTZ6Yruo5qdoglgJjU8Mvpz0HKhWRVrADokqokmalMwsU3Q7TJkYzM/s6FyRMd3Roo=
  - secure: H/QQMBAop2Q7dcr9U2e5oiWac+L55tW9Wy4KS+YSBpXDZYkeux9yA3giWBC8zFQuY8k/ZB9KNDTfD3xfL7vZ6+yyHI4paGu1Bqc8iAQ3kTGiuGnsc3WwG5IQVBiO5gTmw3skBumFhb1cZaqLFo13ZjjTWGwdM/756OXncufW6Wi0rMg3AJpgVUUyHg2M3ptxXmNtnIWcEEGx1BI6rqSPsuDFOxn2TVcxVbcJ2RfAQxpv5Cxz2JMqcc91SSn9H+SCWyEAdTUTf7B4Onl306+rAzEteLYi/GeeCWeKVlmz/G+KBZ0wlZQBrnXJqJJrmUeSOxIs8p5HCysz5ZQcsKfddFwoHS8v/bHvhJVZeYk/I60A/7lSpM19P7Y3HvOn6OqjzM7RvXaFE5bD1qmCDojh6XspFS+XT9N0pOhgo+X2J3PGyCrxdfkvKDDquOGG5E/cPHoIsgw9Eu524diEkls66e6wGJRyFOQPkW2esj/V7CP6AQ8Oy+/ngEs9QquMxsRtlHc2yI+2h+2q6u/KQvjHw+07/Fn52vNqGzwWahoXz17r5YcG0/KP8Ryv6Kf02VBw4NXJ68SSBfuFhGxKiQ5x8giDP8Ac7zM2ROJY06KZlM27gqBrXIzMsI3ptm+B3atw6OzHNvKSGJOAVrvTBAwK/yv/Z+p40uyY5LxJj27nC20=
